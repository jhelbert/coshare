{% extends "base.html" %}

{% block title %}
Welcome to CoShare!
{% endblock %}

{% block head %}
<link href="{{STATIC_URL}}/css/index.css" rel="stylesheet">
<link href='http://fonts.googleapis.com/css?family=Autour+One' rel='stylesheet' type='text/css'>

<!-- packery -->
<script src="{{STATIC_URL}}/js/packery.min.js"></script>
<script src="{{STATIC_URL}}/js/jquery.imagesloaded.js"></script>

<style>
.children-well {
  width:200px;
}

.content {
  height: 75px;
}

.contents-container {
  max-height: 255px;
  overflow-y: hidden;
}

#coshare-title {
  font-family: 'Autour One', cursive;
}

.header {
  height: 160px;
  text-align: center;
  max-width: 200px;
}

.album-button {
}


</style>

<script>
$(function() {
  $(".contents-container").imagesLoaded(function() {
    $(this).packery({
      itemSelector: ".content",
      gutter: 10,
    });
  });
})
</script>
{% endblock %}

{% block content %}
<!-- page container -->
<div class="container-fluid">
  <!-- TITLE -->
  <div class="row-fluid">
    <div class="span12" align="center">
      <h1 class="text-center"><span id="coshare-title">Welcome to CoShare!</span></h1>
      <i><h2>Manage your content - <b>together</b>.</h2></i>
    </div>
  </div>
  {% if queue_size > 0 %}
  <div class="row-fluid">
    <div class="span3"></div>
    <div class="span6 alert alert-error">
      <div style="vertical-align:middle; padding-top: 6px;">
        <span>You have <b>{{queue_size}}</b> item{% if queue_size > 1 %}s{% endif %} in your queue.</span>
        <button class="btn btn-danger pull-right" onclick="window.location.href='/browse/?id={{userprof.queue.id}}'">Review Your Queue</button>
      </div>
    </div>
    <div class="span3"></div>
  </div>
  {% endif %}
  <!-- BRUNT OF CONTENT -->
  <div class="row-fluid">
    <!-- POPULAR ALBUMS -->
    <div class="span6">
      <div class="container-fluid">
        {% for album in albums %}
          <div class="row-fluid well">
            <div class="span12 contents-container">
              <div class="header content">
                <h2>{{album.name}}</h2>
                <button class="btn btn-success album-button" onclick="window.location='/browse/?id={{album.id}}'">Go to Album</button>  
              </div>
              {% for content in album.content.all %}
              {% if content.is_video %}
              <video  class="content" src="/media/{{content.image}}" height="100" width="100"></video>
              {% else %}
              <img class="content" src="/media/{{content.image}}"></image>

              {% endif %}
              {% endfor %}
            </div>
          </div>
        {% endfor %}
      </div>
    </div>
    <!-- KIDS -->
    <div class="span6">
      <div class="container-fluid">
        {% for child in children %}
          <div class="row-fluid well">
            <div class="span12 contents-container">
              <div class="header content">
                <h1>{{child.name}}</h1>
                <button class="btn btn-success album-button" onclick="window.location='/browse/?id={{child.album.id}}'">Go to Album</button>  
              </div>
              {% for content in child.album.content.all %}
              {% if content.is_video %}
              <video  class="content" src="/media/{{content.image}}" height="100" width="100"></video>
              {% else %}
              <img class="content" src="/media/{{content.image}}"></image>

              {% endif %}
              {% endfor %}

            </div>
          </div>
        {% endfor %}
      </div>
    </div>
  </div>
</div>

{% endblock %}